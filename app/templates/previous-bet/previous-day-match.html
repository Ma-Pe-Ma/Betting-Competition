<div style="display: inline-block;">Starting credit amount</div> <a href="./group" style="display: inline-block;">after group bet</a> <div style="display: inline-block;">: {{start_amount}}</div>
<div>Success rate: {{success_rate|round(2)}}</div>

{% set day_names = dict() %}
{% set dummy = day_names.update({0 : 'Monday'}) %}
{% set dummy = day_names.update({1 : 'Tuesday'}) %}
{% set dummy = day_names.update({2 : 'Wednesday'}) %}
{% set dummy = day_names.update({3 : 'Thursday'}) %}
{% set dummy = day_names.update({4 : 'Friday'}) %}
{% set dummy = day_names.update({5 : 'Saturday'}) %}
{% set dummy = day_names.update({6 : 'Sunday'}) %}

{% for day in days %}
    {%if loop.index % 10 == 1 %}

    <table style="width:90%;margin-left:20px;background-color: lightblue">
        <tr>
            <th rowspan="2" style="width: 5%;">ID</th>
            <th rowspan="2" style="width: 7%;text-align:center;">Time</th>
            <th rowspan="2" style="width: 25%;text-align:center;">Teams</th>
            <th rowspan="2" style="width: 10%;text-align:center;">Result</th>
            <th rowspan="2" style="width: 15%;text-align:center;">Type</th>
            <th scope="col" colspan="3" style="text-align:center;">Odds</th> 
            <th rowspan="2" style="width: 7%;text-align:center;">Tip</th>
            <th rowspan="2" style="width: 7%;text-align:center;">Bet</th>
            <th rowspan="2" style="width: 8%;text-align:center;">Prize + Bonus</th>
            <th rowspan="2" style="width: 15%;text-align:center;">Balance after match</th>
        </tr>

        <th style="text-align:center;width: 3%;">1</td>
        <th style="text-align:center;width: 3%;">X</td>
        <th style="text-align:center;width: 3%;">2</td>
    </table>   
    {% endif %}

    <div id="ID_{{day.number}}" style="background-color: aquamarine; width: 20em; ">
        {{day.number}}. day: {{day.date}} - {{day_names[day.id]}}
    </div>

    <table style="width:90%;margin-left:20px;">
        <tr>
            <th rowspan="2" style="width: 5%;"></th>
            <th rowspan="2" style="width: 7%;text-align:center;"></th>
            <th rowspan="2" style="width: 25%;text-align:center;"></th>
            <th rowspan="2" style="width: 10%;text-align:center;"></th>
            <th rowspan="2" style="width: 15%;text-align:center;" ></th>
            <th scope="col" colspan="3" style="text-align:center;"></th> 
            <th rowspan="2" style="width: 7%;text-align:center;"></th>
            <th rowspan="2" style="width: 7%;text-align:center;"></th>
            <th rowspan="2" style="width: 8%;text-align:center;"></th>
            <th rowspan="2" style="width: 15%;text-align:center;"></th>
        </tr>

          <th style="text-align:center;width: 3%;"></td>
          <th style="text-align:center;width: 3%;"></td>
          <th style="text-align:center;width: 3%;"></td>

        {% for match in day.matches %}

            {% set background = 'white' %}

            {% if loop.index % 2 == 1 %}
                {% set background = 'white' %}   

                {% if match.bet_result == 1 %}
                    {% set background = '#FFAAAA' %}
                {% elif match.bet_result == 2 %}
                    {% set background = '#00FF00' %}
                {% endif %}
            {% else %}
                {% set background = '#E8E8E8' %}

                {% if match.bet_result == 1 %}
                    {% set background = '#FFCCCC' %}
                {% elif match.bet_result == 2 %}
                    {% set background = '#80ff80' %}
                {% endif %}
            {% endif %}

        <tr style="padding-bottom:5px; background-color: {{background}};">
            <td>{{match.id}}</td>
            <td style="text-align:center;">{{match.match.time}}</td>
            <td style="text-align:center;">{{match.match.team1}} - {{match.match.team2}}</td>
        {% if match.result1 is none or match.result2 is none %}    
            <td style="text-align:center;">In progress</td>
        {% else %}
            <td style="text-align:center;">{{match.match.goal1}} - {{match.match.goal2}}</td>
        {% endif %}
            <td style="text-align:center;">{{match.match.round}}</td>
            <td style="text-align:center;">{{match.match.odd1}}</td>
            <td style="text-align:center;">{{match.match.oddX}}</td>
            <td style="text-align:center;">{{match.match.odd2}}</td>
            <td style="text-align:center;">{{match.bet_result.goal1}}-{{match.bet_result.goal2}}</td>
            <td style="text-align:center;">{{match.bet_result.bet}}</td>
        {% if (match.match.result1 is none or match.match.result2 is none) and match.bet_result.bet > 0 %}
            <td style="text-align:center;">In progress</td>
        {% else %}
            <td style="text-align:center;">{{match.bet_result.prize|round(2)}} + {{match.bet_result.bonus|round(2)}}</td>
            
        {% endif %}
            <td style="text-align:center;">{{match.bet_result.balance|round(2)}}</th>
        </tr>

        {% endfor %}
    </table>
    <br>

    {%if day.date == group_evaluation_date %}
    <br>
    <div style="background-color: greenyellow;">
        <a href="group" style="display: inline-block;font-weight: bold;">Group bet total winning: {{group_bonus}}</a>
        <div style="display: inline-block;padding-left: 1em;">Balance after group bonus: {{balance_after_group}}</div>
    </div>
    <br>
    {% endif %}
{% endfor %}

{% if final_bet and final_bet.success is not none %} 
<br>
<div style="background-color: greenyellow;">
    {% if final_bet.success == 1 %}
    <a href="group" style="display: inline-block;font-weight: bold;">Final result bet prize: {{(final_bet.bet * final_bet.multiplier)|round(2)}}</a>
    {% else %}
    <a href="group" style="display: inline-block;font-weight: bold">Final result bet prize: 0</a>
    {% endif %}
    <div style="display: inline-block;padding-left: 4em;font-weight: bold">Finishing balance: {{finishing_balance|round(2)}}</div>
</div>
<br>
{% endif %}